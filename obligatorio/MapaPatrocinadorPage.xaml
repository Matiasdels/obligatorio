<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="obligatorio.MapaPatrocinadorPage"
             xmlns:maps="clr-namespace:Microsoft.Maui.Controls.Maps;assembly=Microsoft.Maui.Controls.Maps"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             Title="Ubicación del Patrocinador"
             BackgroundColor="#f8f9fa">
    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- Gradiente azul principal -->
            <LinearGradientBrush x:Key="BlueGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#2196F3" Offset="0.0" />
                <GradientStop Color="#1976D2" Offset="1.0" />
            </LinearGradientBrush>

            <!-- Estilo para botones -->
            <Style x:Key="ActionButton" TargetType="Button">
                <Setter Property="Background" Value="{StaticResource BlueGradient}" />
                <Setter Property="TextColor" Value="White" />
                <Setter Property="CornerRadius" Value="25" />
                <Setter Property="FontSize" Value="14" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="Padding" Value="15,10" />
                <Setter Property="Margin" Value="5" />
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header con información del patrocinador -->
        <Frame Grid.Row="0"
               Background="{StaticResource BlueGradient}"
               CornerRadius="0,0,20,20"
               HasShadow="True"
               Margin="0,0,0,10">

            <StackLayout Orientation="Horizontal" 
                        Spacing="15">

                <!-- Imagen/Icono del patrocinador -->
                <Frame BackgroundColor="White"
                       CornerRadius="25"
                       WidthRequest="50"
                       HeightRequest="50"
                       HasShadow="False"
                       Padding="0"
                       VerticalOptions="Center">
                    <Label Text="🏢"
                           FontSize="24"
                           HorizontalOptions="Center"
                           VerticalOptions="Center" />
                </Frame>

                <!-- Información del patrocinador -->
                <StackLayout VerticalOptions="Center" 
                            HorizontalOptions="FillAndExpand">

                    <Label x:Name="LblNombrePatrocinador"
                           Text="Cargando..."
                           FontSize="20"
                           FontAttributes="Bold"
                           TextColor="White" />

                    <Label x:Name="LblDireccionPatrocinador"
                           Text="Ubicación"
                           FontSize="14"
                           TextColor="White"
                           Opacity="0.9"
                           Margin="0,2,0,0" />
                </StackLayout>
            </StackLayout>
        </Frame>

        <!-- Mapa -->
        <Frame Grid.Row="1"
               BackgroundColor="White"
               CornerRadius="15"
               HasShadow="True"
               Margin="10,0,10,10"
               Padding="0">

            <Grid>
                <maps:Map x:Name="MapaUbicacion"
                         IsShowingUser="True"
                         MapType="Street" />

                <!-- Indicador de carga -->
                <StackLayout x:Name="LoadingIndicator"
                            IsVisible="True"
                            BackgroundColor="#80FFFFFF"
                            VerticalOptions="CenterAndExpand"
                            HorizontalOptions="CenterAndExpand">

                    <ActivityIndicator IsRunning="True"
                                     Color="#2196F3"
                                     Scale="1.5" />

                    <Label Text="Cargando mapa..."
                           FontSize="16"
                           TextColor="#666"
                           HorizontalOptions="Center"
                           Margin="0,20,0,0" />
                </StackLayout>
            </Grid>
        </Frame>

        <!-- Panel de acciones -->
        <Border Grid.Row="2"
                BackgroundColor="White"
                Padding="20,15">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="20,20,0,0" />
            </Border.StrokeShape>
            <Border.Shadow>
                <Shadow Brush="Black" Offset="0,-2" Radius="10" Opacity="0.1" />
            </Border.Shadow>

            <!-- Solo el botón de direcciones centrado -->
            <Button x:Name="BtnDirecciones"
                    Text="🧭 Ir al Lugar"
                    Style="{StaticResource ActionButton}"
                    HorizontalOptions="Center"
                    WidthRequest="200"
                    Clicked="OnDireccionesClicked" />
        </Border>

        <!-- Toast/Mensaje de estado -->
        <Frame x:Name="ToastMessage"
               Grid.Row="0"
               Grid.RowSpan="3"
               BackgroundColor="#323232"
               CornerRadius="25"
               HasShadow="True"
               Padding="20,15"
               HorizontalOptions="Center"
               VerticalOptions="End"
               Margin="20,0,20,100"
               IsVisible="False"
               Opacity="0">

            <Label x:Name="ToastText"
                   Text=""
                   TextColor="White"
                   FontSize="14"
                   HorizontalOptions="Center" />
        </Frame>
    </Grid>
</ContentPage>